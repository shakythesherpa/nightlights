language: node_js
node_js:
  - "0.12"

env:
  global:
    - GH_REF=github.com/developmentseed/india-lights.git
    - DEPLOY_BRANCH=master
    - secure: "ELNfN3pmusfhCnn5RGC96fIFqWqP1RLHpZ48+Fmi/SpCFQelVvnoXSW3OXkhk8S4wf9ZpreuWe/qXeDxKl8vEMIwR8OkZByi3di9FnbhwjEWFXAL9VfeMCW+cwXNytekLa+JCMRztPiFMYJXuqRKYjw2MYeS0Kxn/YBXmKc8igw="

cache:
  directories:
    - node_modules

before_install:
- chmod +x ./.build_scripts/deploy.sh
- chmod +x ./.build_scripts/lint.sh

before_script:
- ./.build_scripts/lint.sh || true
- npm test

script:
- npm run build

after_success:
- ./.build_scripts/deploy.sh
